<!--<?xml version="1.0" encoding="UTF-8"?>-->
<!--<configuration>-->
<!--    <include resource="org/springframework/boot/logging/logback/defaults.xml"/>-->

<!--    <springProperty scope="context" name="app.name" source="spring.application.name"/>-->
<!--    &lt;!&ndash; 基于 converter &ndash;&gt;-->
<!--    <conversionRule conversionWord="sensitive" converterClass="com.github.houbb.sensitive.logback.converter.SensitiveLogbackConverter" />-->

<!--    &lt;!&ndash; 添加 SkyWalking 的 TraceId 转换器 &ndash;&gt;-->
<!--    <conversionRule conversionWord="tid" converterClass="org.apache.skywalking.apm.toolkit.log.logback.v1.x.LogbackPatternConverter"/>-->

<!--    <property name="APP_NAME" value="${app.name}"/>-->
<!--    <property name="LOG_PATH" value="${user.home}/${APP_NAME}/logs"/>-->
<!--    <property name="LOG_FILE" value="${LOG_PATH}/application.log"/>-->
<!--    <property name="FILE_LOG_PATTERN" value="%d{yyyy-MM-dd HH:mm:ss.SSS} [%tid] %-5level [%thread] %logger{36} - %sensitive%n"/>-->

<!--    <appender name="APPLICATION" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
<!--        <file>${LOG_FILE}</file>-->
<!--        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">-->
<!--            <layout class="org.apache.skywalking.apm.toolkit.log.logback.v1.x.TraceIdPatternLogbackLayout">-->
<!--                <Pattern>${FILE_LOG_PATTERN}</Pattern>-->
<!--            </layout>-->
<!--        </encoder>-->
<!--        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">-->
<!--            <fileNamePattern>${LOG_FILE}.%d{yyyy-MM-dd}.%i.log</fileNamePattern>-->
<!--            <maxHistory>7</maxHistory>-->
<!--            <maxFileSize>50MB</maxFileSize>-->
<!--            <totalSizeCap>20GB</totalSizeCap>-->
<!--        </rollingPolicy>-->
<!--    </appender>-->

<!--    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">-->
<!--        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">-->
<!--            <layout class="org.apache.skywalking.apm.toolkit.log.logback.v1.x.TraceIdPatternLogbackLayout">-->
<!--                <Pattern>${FILE_LOG_PATTERN}</Pattern>-->
<!--            </layout>-->
<!--        </encoder>-->
<!--    </appender>-->

<!--    &lt;!&ndash; 添加异步 appender，提高性能 &ndash;&gt;-->
<!--    <appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">-->
<!--        <discardingThreshold>20</discardingThreshold>-->
<!--        <queueSize>2048</queueSize>-->
<!--        <neverBlock>true</neverBlock>-->
<!--        <includeCallerData>false</includeCallerData>-->
<!--        <appender-ref ref="APPLICATION"/>-->
<!--    </appender>-->

<!--    <root level="WARN">-->
<!--        <appender-ref ref="ASYNC"/>-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </root>-->
<!--</configuration>-->

<configuration scan="true" scanPeriod="60 seconds" debug="false">
    <include resource="org/springframework/boot/logging/logback/defaults.xml"/>
    <springProperty scop="context" name="LOG_PATH" source="logging.file.path" defaultValue="/Applications/dev/dev_logs"/>
    <springProperty scop="context" name="LOG_FILE" source="logging.file.name" defaultValue="wisps-user"/>

    <springProfile name="local">
        <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
            <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
                <layout class="org.apache.skywalking.apm.toolkit.log.logback.v1.x.TraceIdPatternLogbackLayout">
                    <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%X{trace_id}] [%X{span_id}] [%X{x-trace-id}] [%thread] %logger{36} [%M] - %msg%n</pattern>
                </layout>
            </encoder>
        </appender>
        <logger name="com.alibaba.nacos.client" additivity="false">
            <level value="ERROR"/>
            <appender-ref ref="STDOUT"/>
        </logger>

        <logger name="com.beam.work.official.account.provider" additivity="false">
            <level value="DEBUG"/>
            <appender-ref ref="STDOUT"/>
        </logger>
        <!-- 配置 MyBatis 的日志记录器 -->
        <Logger name="org.apache.ibatis" additivity="false">
            <level value="DEBUG"/>
            <appender-ref ref="STDOUT"/>
        </Logger>

        <root level="INFO">
            <appender-ref ref="STDOUT"/>
        </root>
    </springProfile>
</configuration>